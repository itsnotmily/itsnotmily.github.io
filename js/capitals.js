const countries = [{
    "Country": "Afghanistan",
    "Capital": "Kabul"
}, {
    "Country": "Albania",
    "Capital": "Tirana"
}, {
    "Country": "Algeria",
    "Capital": "Algiers"
}, {
    "Country": "Andorra",
    "Capital": "Andorra la Vella"
}, {
    "Country": "Angola",
    "Capital": "Luanda"
}, {
    "Country": "Antigua and Barbuda",
    "Capital": "Saint John's"
}, {
    "Country": "Argentina",
    "Capital": "Buenos Aires"
}, {
    "Country": "Armenia",
    "Capital": "Yerevan"
}, {
    "Country": "Australia",
    "Capital": "Canberra"
}, {
    "Country": "Austria",
    "Capital": "Vienna"
}, {
    "Country": "Azerbaijan",
    "Capital": "Baku"
}, {
    "Country": "Bahamas",
    "Capital": "Nassau"
}, {
    "Country": "Bahrain",
    "Capital": "Manama"
}, {
    "Country": "Bangladesh",
    "Capital": "Dhaka"
}, {
    "Country": "Barbados",
    "Capital": "Bridgetown"
}, {
    "Country": "Belarus",
    "Capital": "Minsk"
}, {
    "Country": "Belgium",
    "Capital": "Brussels"
}, {
    "Country": "Belize",
    "Capital": "Belmopan"
}, {
    "Country": "Benin",
    "Capital": "Porto-Novo"
}, {
    "Country": "Bhutan",
    "Capital": "Thimphu"
}, {
    "Country": "Bolivia",
    "Capital": "Sucre / La paz"
}, {
    "Country": "Bosnia and Herzegovina",
    "Capital": "Sarajevo"
}, {
    "Country": "Botswana",
    "Capital": "Gaborone"
}, {
    "Country": "Brazil",
    "Capital": "Brasília"
}, {
    "Country": "Brunei",
    "Capital": "Bandar Seri Begawan"
}, {
    "Country": "Bulgaria",
    "Capital": "Sofia"
}, {
    "Country": "Burkina Faso",
    "Capital": "Ouagadougou"
}, {
    "Country": "Burundi",
    "Capital": "Gitega"
}, {
    "Country": "Cabo Verde",
    "Capital": "Praia"
}, {
    "Country": "Cambodia",
    "Capital": "Phnom Penh"
}, {
    "Country": "Cameroon",
    "Capital": "Yaoundé"
}, {
    "Country": "Canada",
    "Capital": "Ottawa"
}, {
    "Country": "Central African Republic",
    "Capital": "Bangui"
}, {
    "Country": "Chad",
    "Capital": "N'Djamena"
}, {
    "Country": "Chile",
    "Capital": "Santiago"
}, {
    "Country": "China",
    "Capital": "Beijing"
}, {
    "Country": "Colombia",
    "Capital": "Bogotá"
}, {
    "Country": "Comoros",
    "Capital": "Moroni"
}, {
    "Country": "Costa Rica",
    "Capital": "San José"
}, {
    "Country": "Côte d'Ivoire",
    "Capital": "Yamoussoukro"
}, {
    "Country": "Croatia",
    "Capital": "Zagreb"
}, {
    "Country": "Cuba",
    "Capital": "Havana"
}, {
    "Country": "Cyprus",
    "Capital": "Nicosia"
}, {
    "Country": "Czech Republic",
    "Capital": "Prague"
}, {
    "Country": "Denmark",
    "Capital": "Copenhagen"
}, {
    "Country": "Djibouti",
    "Capital": "Djibouti"
}, {
    "Country": "Dominica",
    "Capital": "Roseau"
}, {
    "Country": "Dominican Republic",
    "Capital": "Santo Domingo"
}, {
    "Country": "DR Congo",
    "Capital": "Kinshasa"
}, {
    "Country": "Ecuador",
    "Capital": "Quito"
}, {
    "Country": "Egypt",
    "Capital": "Cairo"
}, {
    "Country": "El Salvador",
    "Capital": "San Salvador"
}, {
    "Country": "Equatorial Guinea",
    "Capital": "Malabo"
}, {
    "Country": "Eritrea",
    "Capital": "Asmara"
}, {
    "Country": "Estonia",
    "Capital": "Tallinn"
}, {
    "Country": "Eswatini",
    "Capital": "Eswatini"
}, {
    "Country": "Ethiopia",
    "Capital": "Addis Ababa"
}, {
    "Country": "Fiji",
    "Capital": "Suva"
}, {
    "Country": "Finland",
    "Capital": "Helsinki"
}, {
    "Country": "France",
    "Capital": "Paris"
}, {
    "Country": "Gabon",
    "Capital": "Libreville"
}, {
    "Country": "Gambia",
    "Capital": "Banjul"
}, {
    "Country": "Georgia",
    "Capital": "Tbilisi"
}, {
    "Country": "Germany",
    "Capital": "Berlin"
}, {
    "Country": "Ghana",
    "Capital": "Accra"
}, {
    "Country": "Greece",
    "Capital": "Athens"
}, {
    "Country": "Grenada",
    "Capital": "Saint George's"
}, {
    "Country": "Guatemala",
    "Capital": "Guatemala City"
}, {
    "Country": "Guinea",
    "Capital": "Conakry"
}, {
    "Country": "Guinea-Bissau",
    "Capital": "Bissau"
}, {
    "Country": "Guyana",
    "Capital": "Georgetown"
}, {
    "Country": "Haiti",
    "Capital": "Port-au-Prince"
}, {
    "Country": "Honduras",
    "Capital": "Tegucigalpa"
}, {
    "Country": "Hungary",
    "Capital": "Budapest"
}, {
    "Country": "Iceland",
    "Capital": "Reykjavík"
}, {
    "Country": "India",
    "Capital": "New Delhi"
}, {
    "Country": "Indonesia",
    "Capital": "Jakarta"
}, {
    "Country": "Iran",
    "Capital": "Tehran"
}, {
    "Country": "Iraq",
    "Capital": "Baghdad"
}, {
    "Country": "Ireland",
    "Capital": "Dublin"
}, {
    "Country": "Israel",
    "Capital": "Jerusalem"
}, {
    "Country": "Italy",
    "Capital": "Rome"
}, {
    "Country": "Jamaica",
    "Capital": "Kingston"
}, {
    "Country": "Japan",
    "Capital": "Tokyo"
}, {
    "Country": "Jordan",
    "Capital": "Amman"
}, {
    "Country": "Kazakhstan",
    "Capital": "Nur-Sultan"
}, {
    "Country": "Kenya",
    "Capital": "Nairobi"
}, {
    "Country": "Kiribati",
    "Capital": "Tarawa"
}, {
    "Country": "Kosovo",
    "Capital": "Pristina"
}, {
    "Country": "Kuwait",
    "Capital": "Kuwait City"
}, {
    "Country": "Kyrgyzstan",
    "Capital": "Bishkek"
}, {
    "Country": "Laos",
    "Capital": "Vientiane"
}, {
    "Country": "Latvia",
    "Capital": "Riga"
}, {
    "Country": "Lebanon",
    "Capital": "Beirut"
}, {
    "Country": "Lesotho",
    "Capital": "Maseru"
}, {
    "Country": "Liberia",
    "Capital": "Monrovia"
}, {
    "Country": "Libya",
    "Capital": "Tripoli"
}, {
    "Country": "Liechtenstein",
    "Capital": "Vaduz"
}, {
    "Country": "Lithuania",
    "Capital": "Vilnius"
}, {
    "Country": "Luxembourg",
    "Capital": "Luxembourg"
}, {
    "Country": "Macao",
    "Capital": "Macau"
}, {
    "Country": "Madagascar",
    "Capital": "Antananarivo"
}, {
    "Country": "Malawi",
    "Capital": "Lilongwe"
}, {
    "Country": "Malaysia",
    "Capital": "Kuala Lumpur"
}, {
    "Country": "Maldives",
    "Capital": "Malé"
}, {
    "Country": "Mali",
    "Capital": "Mali"
}, {
    "Country": "Malta",
    "Capital": "Valletta"
}, {
    "Country": "Marshall Islands",
    "Capital": "Majura"
}, {
    "Country": "Mauritania",
    "Capital": "Nouakchott"
}, {
    "Country": "Mauritius",
    "Capital": "Port Louis"
}, {
    "Country": "Mexico",
    "Capital": "Mexico City"
}, {
    "Country": "Micronesia",
    "Capital": "Palikir"
}, {
    "Country": "Moldova",
    "Capital": "Chișinău"
}, {
    "Country": "Monaco",
    "Capital": "Monaco City"
}, {
    "Country": "Mongolia",
    "Capital": "Ulaanbaatar"
}, {
    "Country": "Montenegro",
    "Capital": "Podgorica"
}, {
    "Country": "Morocco",
    "Capital": "Rabat"
}, {
    "Country": "Mozambique",
    "Capital": "Maputo"
}, {
    "Country": "Myanmar",
    "Capital": "Naypyidaw"
}, {
    "Country": "Namibia",
    "Capital": "Windhoek"
}, {
    "Country": "Nauru",
    "Capital": "Yaren"
}, {
    "Country": "Nepal",
    "Capital": "Kathmandu"
}, {
    "Country": "Netherlands",
    "Capital": "Amsterdam"
}, {
    "Country": "New Zealand",
    "Capital": "Wellington"
}, {
    "Country": "Nicaragua",
    "Capital": "Managua"
}, {
    "Country": "Niger",
    "Capital": "Niamey"
}, {
    "Country": "Nigeria",
    "Capital": "Abuja"
}, {
    "Country": "North Korea",
    "Capital": "Pyongyang"
}, {
    "Country": "North Macedonia",
    "Capital": "Skopje"
}, {
    "Country": "Norway",
    "Capital": "Oslo"
}, {
    "Country": "Oman",
    "Capital": "Muscat"
}, {
    "Country": "Pakistan",
    "Capital": "Islamabad"
}, {
    "Country": "Palau",
    "Capital": "Ngerulmud"
}, {
    "Country": "Palestine",
    "Capital": "Jerusalem"
}, {
    "Country": "Panama",
    "Capital": "Panama City"
}, {
    "Country": "Papua New Guinea",
    "Capital": "Port moresby"
}, {
    "Country": "Paraguay",
    "Capital": "Asunción"
}, {
    "Country": "Peru",
    "Capital": "Lima"
}, {
    "Country": "Philippines",
    "Capital": "Manila"
}, {
    "Country": "Poland",
    "Capital": "Warsaw"
}, {
    "Country": "Portugal",
    "Capital": "Lisbon"
}, {
    "Country": "Qatar",
    "Capital": "Doha"
}, {
    "Country": "Republic of the Congo",
    "Capital": "Brazzaville"
}, {
    "Country": "Romania",
    "Capital": "Bucharest"
}, {
    "Country": "Russia",
    "Capital": "Moscow"
}, {
    "Country": "Rwanda",
    "Capital": "Kigali"
}, {
    "Country": "Saint Kitts and Nevis",
    "Capital": "Basseterre"
}, {
    "Country": "Saint Lucia",
    "Capital": "Castries"
}, {
    "Country": "Saint Vincent and the Grenadines",
    "Capital": "Kingstown"
}, {
    "Country": "Samoa",
    "Capital": "Apia"
}, {
    "Country": "San Marino",
    "Capital": "San Marino"
}, {
    "Country": "Sao Tome & Principe",
    "Capital": "São Tomé"
}, {
    "Country": "Saudi Arabia",
    "Capital": "Riyadh"
}, {
    "Country": "Senegal",
    "Capital": "Dakar"
}, {
    "Country": "Serbia",
    "Capital": "Belgrade"
}, {
    "Country": "Seychelles",
    "Capital": "Victoria"
}, {
    "Country": "Sierra Leone",
    "Capital": "Freetown"
}, {
    "Country": "Singapore",
    "Capital": "Singapore"
}, {
    "Country": "Slovakia",
    "Capital": "Bratislava"
}, {
    "Country": "Slovenia",
    "Capital": "Ljubljana"
}, {
    "Country": "Solomon Islands",
    "Capital": "Honiara"
}, {
    "Country": "Somalia",
    "Capital": "Mogadishu"
}, {
    "Country": "South Africa",
    "Capital": "Cape Town / Pretoria"
}, {
    "Country": "South Korea",
    "Capital": "Seoul"
}, {
    "Country": "South Sudan",
    "Capital": "Juba"
}, {
    "Country": "Spain",
    "Capital": "Madrid"
}, {
    "Country": "Sri Lanka",
    "Capital": "Sri Jayawaredenepura kotte"
}, {
    "Country": "Sudan",
    "Capital": "Khartoum"
}, {
    "Country": "Suriname",
    "Capital": "Paramaribo"
}, {
    "Country": "Sweden",
    "Capital": "Stockholm"
}, {
    "Country": "Switzerland",
    "Capital": "Bern"
}, {
    "Country": "Syria",
    "Capital": "Damascus"
}, {
    "Country": "Taiwan",
    "Capital": "Taipei City"
}, {
    "Country": "Tajikistan",
    "Capital": "Dushanbe"
}, {
    "Country": "Tanzania",
    "Capital": "Dodoma"
}, {
    "Country": "Thailand",
    "Capital": "Bangkok"
}, {
    "Country": "Timor-Leste",
    "Capital": "Dili"
}, {
    "Country": "Togo",
    "Capital": "Lomé"
}, {
    "Country": "Tonga",
    "Capital": "Nuku'alofa"
}, {
    "Country": "Trinidad and Tobago",
    "Capital": "Port of Spain"
}, {
    "Country": "Tunisia",
    "Capital": "Tunis"
}, {
    "Country": "Turkey",
    "Capital": "Ankara"
}, {
    "Country": "Turkmenistan",
    "Capital": "Ashgabat"
}, {
    "Country": "Tuvalu",
    "Capital": "Funafuti"
}, {
    "Country": "Uganda",
    "Capital": "Kampala"
}, {
    "Country": "Ukraine",
    "Capital": "Kyiv"
}, {
    "Country": "United Arab Emirates",
    "Capital": "Abu Dhabi"
}, {
    "Country": "United Kingdom",
    "Capital": "London"
}, {
    "Country": "United States",
    "Capital": "Washington"
}, {
    "Country": "Uruguay",
    "Capital": "Montevideo"
}, {
    "Country": "Uzbekistan",
    "Capital": "Tashkent"
}, {
    "Country": "Vanuatu",
    "Capital": "Port vila"
}, {
    "Country": "Vatican City",
    "Capital": "Vatican City"
}, {
    "Country": "Venezuela",
    "Capital": "Caracas"
}, {
    "Country": "Vietnam",
    "Capital": "Hanoi"
}, {
    "Country": "Yemen",
    "Capital": "San'a"
}, {
    "Country": "Zambia",
    "Capital": "Lusaka"
}, {
    "Country": "Zimbabwe",
    "Capital": "Harare"
}];

const question = document.getElementById("question");
const choices = document.querySelectorAll("#choices button");
const result = document.getElementById("result");
const nextButton = document.getElementById("next");
let currentScore = 0;
if (localStorage.highestScore != NaN && localStorage.highestScore != undefined) {
    document.getElementById("highestScore").innerText = `Your highest score is: ${localStorage.highestScore}`;
} else {
    localStorage.highestScore = 0;
}
if (localStorage.lifeScore) {
    document.getElementById("lifetimeScore").innerText = `Your lifetime score is: ${localStorage.lifeScore}`;
} else {
    localStorage.lifeScore = 0;
}

let currentQuestionIndex = 0;

function shuffle(array) {
    for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
    }
}

function setQuestion() {
    nextButton.disabled = "true";
    nextButton.textContent = "Good Luck!";
    currentQuestionIndex = Math.floor(Math.random() * countries.length);
    const country = countries[currentQuestionIndex].Country;
    const capital = countries[currentQuestionIndex].Capital;
    question.textContent = `What is the capital of ${country}?`;

    // Choose 3 random incorrect answers
    const choicesArray = [capital];
    while (choicesArray.length < 4) {
        const randomIndex = Math.floor(Math.random() * countries.length);
        const randomCapital = countries[randomIndex].Capital;
        if (!choicesArray.includes(randomCapital)) {
            choicesArray.push(randomCapital);
        }
    }

    // Shuffle the answer choices and display them on buttons
    shuffle(choicesArray);
    choicesArray.forEach((choice, index) => {
        choices[index].textContent = choice;
        choices[index].onclick = () => {
            if (choice === capital) {
                currentScore++;
                localStorage.lifeScore++;
                result.textContent = `Correct! The capital of ${country} is ${capital}.`;
                document.getElementById("resultCard").style.backgroundColor="lightgreen";

                document.getElementById("lifetimeScore").innerText = `Your lifetime score is: ${localStorage.lifeScore}`;
                document.getElementById("currentScore").innerText = `Your current score is: ${currentScore}`;
                if (currentScore>localStorage.highestScore) {
                    localStorage.highestScore=currentScore;
                    document.getElementById("highestScore").innerText = `Your highest score is: ${localStorage.highestScore}`;
                }
            } else {
                currentScore = 0;
                result.textContent = `Wrong! The capital of ${country} is ${capital}.`;
                document.getElementById("resultCard").style.backgroundColor="lightcoral";

                document.getElementById("currentScore").innerText = `Your current score is: ${currentScore}`;
            }
            choices.forEach(choice => {
                choice.disabled = true;
            });
            //document.getElementById("resultCard").style.display="block";
            nextButton.disabled = false;
            nextButton.textContent = "Next Question";
        };
    });
}

function resetQuestion() {
    choices.forEach(choice => {
        choice.disabled = false;
    });
    result.textContent = "Pick one of the answers above";
    document.getElementById("resultCard").style.backgroundColor="lightsalmon";

    //nextButton.disabled = "true";
}

nextButton.addEventListener("click", () => {
    currentQuestionIndex = (currentQuestionIndex + 1) % countries.length;
    resetQuestion();
    setQuestion();
});

setQuestion();